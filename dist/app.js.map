{"version":3,"sources":["../bin/index.js"],"names":[],"mappings":"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","file":"app.js","sourcesContent":["import axios from 'axios';\n\nconst actionConstant = 'redux-api-http/';\nlet apiAction = {\n\tREQUEST: 'REQUEST',\n\tRESPONSE: 'RESPONSE',\n\tERROR: 'ERROR',\n\tREMOVE: 'REMOVE'\n};\nexport const status = {\n\tPEN: 'PENDING',\n\tSUCC: 'SUCCESS',\n\tERR: 'ERROR',\n\tREM: 'REMOVED'\n};\nexport const apiMethods = {\n\tGET: 'get',\n\tPOST: 'post',\n\tPUT: 'put',\n\tDELETE: 'delete'\n}\n\n\nlet generateActionType = (action) => {\n\treturn actionConstant + action;\n}\n\nlet requestApi = (key, url, method, data, headers) => {\n\treturn {\n\t\ttype: generateActionType(apiAction.REQUEST),\n\t\tpayload: {\n\t\t\tkey,\n\t\t\tapi: url,\n\t\t\tmethod,\n\t\t\tdata,\n\t\t\theaders\n\t\t},\n\t\treceivedAt: Date.now()\n\t}\n}\nlet responseApi = (key, response) => {\n\treturn {\n\t\ttype: generateActionType(apiAction.RESPONSE),\n\t\tpayload: {\n\t\t\tkey,\n\t\t\tstatus: response.status,\n\t\t\tdata: response.data\n\t\t},\n\t\treceivedAt: Date.now()\n\t}\n}\nlet errorApi = (key, error) => {\n\treturn {\n\t\ttype: generateActionType(apiAction.ERROR),\n\t\tpayload: {\n\t\t\tkey,\n\t\t\tstatus: error.status,\n\t\t\tdata: error.data\n\t\t},\n\t\treceivedAt: Date.now()\n\t}\n}\nlet removeApi = (key) => {\n\treturn {\n\t\ttype: generateActionType(apiAction.REMOVE),\n\t\tpayload: {\n\t\t\tkey,\n\t\t},\n\t\treceivedAt: Date.now()\n\t}\n}\n\nconst fetchData = (key, url, method, data, headers) => {\n\treturn ((dispatch) => {\n\t\tdispatch(requestApi(key, url, method, data, headers));\n\t\taxiosRequest(key, url, method, data, headers, responseApi, errorApi, dispatch);\n\t});\n}\n\nlet axiosRequest = (key, url, method, data, headers, succCallback, errCallback, dispatch) => {\n\tlet dataToSend;\n\tif(method && method.toLowerCase() === 'get' && data) {\n\t\tdataToSend = '?'\n\t\tfor(let dataKey in data) {\n\t\t\tdataToSend += dataKey + '=' + data[dataKey];\n\t\t}\n\t} else {\n\t\tdataToSend = data;\n\t}\n\treturn axios({\n\t\turl: url,\n\t\tmethod: method,\n\t\theaders: headers,\n\t\tdata: dataToSend\n\t})\n\t.then((response) => {\n\t\tdispatch(succCallback(key, response));\n\t})\n\t.catch((error) => {\n\t\tdispatch(errCallback(key, error));\n\t});\n}\n\nexport default class AsyncService {\n\n\tdispatch(key, api, method, data, headers) {\n\t\tdata = data || {};\n\t\theaders = headers || {};\n\t\tmethod = method || apiMethods.GET;\n\n\t\treturn fetchData(key, api, method.toLowerCase(), data, headers);\n\t}\n\n\tremove(key) {\n\t\treturn removeApi(key);\n\t}\n\n\tgetReducer(initialState={}) {\n\t\treturn (state=initialState, action) => {\n\t\t\tif(!('type' in action) || !action.type.startsWith(actionConstant)) {\n\t\t\t\treturn state;\n\t\t\t}\n\n\t\t\tlet actionType = action.type.substr(actionConstant.length);\n\t\t\tlet apiKey = action.payload.key;\n\n\t\t\tlet nextState = Object.assign({}, state);\n\t\t\tnextState[apiKey] = Object.assign({}, state[apiKey]);\n\n\t\t\tnextState[apiKey] = nextState[apiKey] || {};\n\t\t\tnextState[apiKey]['lastUpdated'] = action.receivedAt;\n\t\t\tswitch(actionType) {\n\t\t\t\tcase apiAction.REQUEST:\n\t\t\t\t\tnextState[apiKey]['api'] = action.payload.api;\n\t\t\t\t\tnextState[apiKey]['status'] = status.PEN;\n\n\t\t\t\t\tnextState[apiKey]['request'] = {}\n\t\t\t\t\tnextState[apiKey]['response'] = {};\n\t\t\t\t\tnextState[apiKey]['request']['headers'] = action.payload.headers;\n\t\t\t\t\tnextState[apiKey]['request']['data'] = action.payload.data;\n\t\t\t\t\tbreak;\n\t\t\t\tcase apiAction.RESPONSE:\n\t\t\t\t\tnextState[apiKey]['status'] = status.SUCC;\n\t\t\t\t\tnextState[apiKey]['httpCode'] = action.payload.status;\n\t\t\t\t\tnextState[apiKey]['response'] = action.payload.data;\n\t\t\t\t\tbreak;\n\t\t\t\tcase apiAction.ERROR:\n\t\t\t\t\tnextState[apiKey]['status'] = status.ERR;\n\t\t\t\t\tnextState[apiKey]['httpCode'] = action.payload.status;\n\t\t\t\t\tnextState[apiKey]['response'] = action.payload.data;\n\t\t\t\t\tbreak;\n\t\t\t\tcase apiAction.REMOVE:\n\t\t\t\t\tnextState[apiKey]['status'] = status.REM;\n\n\t\t\t\t\tnextState[apiKey]['request'] = {};\n\t\t\t\t\tnextState[apiKey]['response'] = {};\n\t\t\t\t\tnextState[apiKey]['status'] = undefined;\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\treturn state;\n\t\t\t}\n\t\t\treturn nextState;\n\t\t}\n\t}\n}\n\nexport const asyncService = new AsyncService();\nexport const apiReducer = asyncService.getReducer();\n"]}