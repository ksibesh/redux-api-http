{"version":3,"sources":["../bin/index.js"],"names":[],"mappings":"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","file":"app.js","sourcesContent":["import axios from 'axios';\n\nexport const axiosConstants = {\n\tAXIOS_REQUEST: 'REQUEST',\n\tAXIOS_RESPONSE: 'RESPONSE',\n\tAXIOS_ERROR: 'ERROR',\n\tAXIOS_REMOVE: 'REMOVE'\n};\nexport const axiosStatusConst = {\n\tPEN: 'PENDING',\n\tSUCC: 'SUCCESS',\n\tERR: 'ERROR',\n\tREM: 'REMOVED'\n}\n\nexport default class AsyncService {\n\tconstructor(props) {\n\t\tthis.apiObj = {};\n\t}\n\n\tregister(apis, headers) {\n\t\tif(!apis) {\n\t\t\treturn this.apiObj;\n\t\t}\n\n\t\theaders = headers || function() {\n\t\t\treturn {\n\n\t\t\t};\n\t\t};\n\n\t\tfor(let key in apis) {\n\t\t\tthis.apiObj[key] = this.apiObj[key] || {};\n\t\t\tthis.apiObj[key]['actionCreator'] = {\n\t\t\t\tget: (data, pathParam) => {\n\t\t\t\t\tif(pathParam) {\n\t\t\t\t\t\tif(apis[key].charAt(apis[key].length - 1) === '/') {\n\t\t\t\t\t\t\tapis[key] += pathParam;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tapis[key] += '/' + pathParam;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn fetchData(key, apis[key], 'get', data, headers());\n\t\t\t\t},\n\t\t\t\tput: (data) => {\n\t\t\t\t\treturn fetchData(key, apis[key], 'put', data, headers());\n\t\t\t\t},\n\t\t\t\tpost: (data) => {\n\t\t\t\t\treturn fetchData(key, apis[key], 'post', data, headers());\n\t\t\t\t},\n\t\t\t\tdelete: (data) => {\n\t\t\t\t\treturn fetchData(key, apis[key], 'delete', data, headers());\n\t\t\t\t}\n\t\t\t};\n\t\t\tthis.apiObj[key]['remove'] = () => {\n\t\t\t\treturn removeApi(key);\n\t\t\t};\n\t\t\tthis.apiObj[key]['reducer'] = (state={}, action) => {\n\t\t\t\tif(!('type' in action)) {\n\t\t\t\t\treturn state;\n\t\t\t\t}\n\n\t\t\t\tlet nextState = Object.assign({}, state);\n\t\t\t\tswitch(action.type) {\n\t\t\t\t\tcase key + '-' + axiosConstants.AXIOS_REQUEST:\n\t\t\t\t\t\tnextState['status'] = axiosStatusConst.PEN;\n\t\t\t\t\t\tnextState['request'] = action.payload;\n\t\t\t\t\t\tnextState['lastUpdated'] = action.receivedAt;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase key + '-' + axiosConstants.AXIOS_RESPONSE:\n\t\t\t\t\t\tnextState['status'] = axiosStatusConst.SUCC;\n\t\t\t\t\t\tnextState['httpCode'] = action.payload.status;\n\t\t\t\t\t\tnextState['response'] = action.payload.data;\n\t\t\t\t\t\tnextState['lastUpdated'] = action.receivedAt;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase key + '-' + axiosConstants.AXIOS_ERROR:\n\t\t\t\t\t\tnextState['status'] = axiosStatusConst.ERR;\n\t\t\t\t\t\tnextState['httpCode'] = action.payload.status;\n\t\t\t\t\t\tnextState['error'] = action.payload.data;\n\t\t\t\t\t\tnextState['lastUpdated'] = action.receivedAt;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase key + '-' + axiosConstants.AXIOS_REMOVE:\n\t\t\t\t\t\tnextState['status'] = axiosStatusConst.REM;\n\t\t\t\t\t\tnextState['lastUpdated'] = action.receivedAt;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\treturn state;\n\t\t\t\t}\n\t\t\t\treturn nextState;\n\t\t\t};\n\t\t}\n\t\treturn this.apiObj;\n\t}\n\n\tgetReducers() {\n\t\tlet apiReducers = {};\n\t\tfor(let key in this.apiObj) {\n\t\t\tapiReducers[key] = this.apiObj[key].reducer;\n\t\t}\n\t\treturn apiReducers;\n\t}\n}\n\nlet requestApi = (key, data) => {\n\treturn {\n\t\ttype: key + '-' + axiosConstants.AXIOS_REQUEST,\n\t\tpayload: data,\n\t\treceivedAt: Date.now()\n\t}\n}\nlet responseApi = (key, response) => {\n\treturn {\n\t\ttype:key + '-' + axiosConstants.AXIOS_RESPONSE,\n\t\tpayload: response,\n\t\treceivedAt: Date.now()\n\t}\n}\nlet errorApi = (key, error) => {\n\treturn {\n\t\ttype: key + '-' + axiosConstants.AXIOS_ERROR,\n\t\tpayload: error,\n\t\treceivedAt: Date.now()\n\t}\n}\nlet removeApi = (key) => {\n\treturn {\n\t\ttype: key + '-' + axiosConstants.AXIOS_REMOVE,\n\t\treceivedAt: Date.now()\n\t}\n}\n\nconst fetchData = (key, url, method, data, headers) => {\n\treturn ((dispatch) => {\n\t\tdispatch(requestApi(key, data));\n\t\taxiosRequest(key, url, method, data, headers, responseApi, errorApi, dispatch);\n\t});\n}\n\nlet axiosRequest = (key, url, method, data, headers, succCallback, errCallback, dispatch) => {\n\tlet dataToSend;\n\tif(method && method.toLowerCase() === 'get' && data) {\n\t\tdataToSend = '?'\n\t\tfor(let dataKey in data) {\n\t\t\tdataToSend += dataKey + '=' + data[dataKey];\n\t\t}\n\t} else {\n\t\tdataToSend = data;\n\t}\n\treturn axios({\n\t\turl: url,\n\t\tmethod: method,\n\t\theaders: headers,\n\t\tdata: dataToSend\n\t})\n\t.then((response) => {\n\t\tdispatch(succCallback(key, response));\n\t})\n\t.catch((error) => {\n\t\tdispatch(errCallback(key, error));\n\t});\n}\n"]}